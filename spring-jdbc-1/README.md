# Transaction : 트랜잭션(거래)

A 거래와 B 거래가 모두 성공할 때만 의미가 있을 때,
두 거래를 하나의 처리단위로 취급하는 것을 트랜잭션이라고 부른다.

* 두 거래 모두 다 성공하면 결과적으로 성공으로 판단한다.
* 두 거래 중에 하나라도 실패하면 결과적으로 실패라고 판단한다.

예를 들어서 상인이 A 마을에서 물건을 구매한 다음,
물건을 B 마을에 파는 비즈니슬 한다고 가정하자.

A 마을 &larr; 물건을 구매 &rarr; 상인 &larr; 물건을 판매 &rarr; B 마을

여기서 두 번의 거래가 발생하는데 다음과 같다.

1. A 마을과의 거래에서 물건을 산다.
2. B 마을과의 거래에서 물건을 판다.

이 때, A 마을에서 물건을 사지 못했다면 B 마을에 물건을 
파는 행위는 일어날 수 없다. 또한 상인이 산 물건을 
B 마을에 팔지 못한다면 상인은 물건을 물리고 싶어진다. 
그렇기 때문에 두 거래는 하나의 비즈니스 업무로 보고 
둘 중의 하나라도 실패한다면 모든 거래가 처음부터 없었던 
것처럼 취급하고 싶어지게 된다.

데이터베이스에서는 여러 SQL 쿼리를 수행할 때,
개발자가 그 쿼리들을 트랜잭션으로 처리한다고 설정하면
그 중에 하나의 쿼리라도 실패할 경우 결과적으로 실패라고
판단한다. 따라서, 앞에서 성공한 일부 쿼리는 취소(Rollback)가 된다.

하나의 트랜잭션으로 묶인 다수의 쿼리 작업은 그 트랜잭션 안에 
포함된 모든 쿼리가 모두 성공할 때만 결과적으로 성공이라고
판단한다. 이 때, 작업을 모두 적용하는 반영(Commit)을 수행한다.
